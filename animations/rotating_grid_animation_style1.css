/* Global reset and full-screen black background */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html,
body {
  width: 100%;
  height: 100%;
  background: #000;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden; /* Prevent scrolling on mobile */
}

/* CSS Variables for colors and responsive sizing */
:root {
  --color1: #ff3b30;
  /* vivid red */
  --color2: #8e80fa;
  /* soft indigo */
  --cell-size: 20px;
  --cell-gap: 10px;
  --grid-cols: 21;
}

/* Responsive adjustments for mobile devices */
@media (max-width: 768px) {
  :root {
    --cell-size: clamp(12px, 4vw, 16px);
    --cell-gap: clamp(6px, 2vw, 8px);
    --grid-cols: 19; /* Larger grid for mobile */
  }
}

@media (max-width: 480px) {
  :root {
    --cell-size: clamp(10px, 3.5vw, 14px);
    --cell-gap: clamp(5px, 1.75vw, 7px);
    --grid-cols: 17; /* Larger grid for very small screens */
  }
}

/* Grid layout: responsive columns with dynamic cell size */
.grid {
  display: grid;
  grid-template-columns: repeat(var(--grid-cols), var(--cell-size));
  grid-auto-rows: var(--cell-size);
  gap: var(--cell-gap);
  max-width: 98vw;
  max-height: 98vh;
}

.cell {
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Outer wrapper for rotation using a smoother animation duration */
.rotate-wrapper {
  width: var(--cell-size);
  height: var(--cell-size);
  transform-origin: center;
  animation: rotateAnim 4s infinite both;
  animation-timing-function: ease-in-out;
  will-change: transform;
}

/* Inner element handles scaling and color with a longer duration for smoothness */
.scale-box {
  width: 100%;
  height: 100%;
  background-color: var(--color1);
  transform-origin: center;
  animation: scaleAnim 4s infinite both;
  animation-timing-function: ease-in-out;
  will-change: transform, background-color;
}

/* Rotation keyframes */
@keyframes rotateAnim {
  0% {
    transform: rotate(0deg);
  }

  25% {
    transform: rotate(0deg);
  }

  50% {
    transform: rotate(var(--init-rot));
  }

  75% {
    transform: rotate(360deg);
  }

  100% {
    transform: rotate(360deg);
  }
}

/* Scaling and color keyframes without any bounce overshoot */
@keyframes scaleAnim {
  0% {
    transform: scaleY(1);
    background-color: var(--color1);
  }

  25% {
    transform: scaleY(0.3);
    background-color: var(--color2);
  }

  50% {
    transform: scaleY(0.3);
    background-color: var(--color1);
  }

  75% {
    transform: scaleY(0.3);
    background-color: var(--color2);
  }

  100% {
    transform: scaleY(1);
    background-color: var(--color1);
  }
}

/* Mobile-specific optimizations */
@media (max-width: 768px) {
  /* Reduce animation complexity on mobile for better performance */
  .rotate-wrapper,
  .scale-box {
    animation-timing-function: linear;
  }

  /* Ensure animations remain smooth on mobile */
  .grid {
    transform: translateZ(0); /* Force hardware acceleration */
  }
}

/* Touch-friendly adjustments */
@media (pointer: coarse) {
  body {
    -webkit-touch-callout: none; /* Disable callout on iOS */
    -webkit-user-select: none; /* Disable text selection */
    user-select: none;
  }
}

/* Landscape orientation adjustments for mobile */
@media (max-width: 768px) and (orientation: landscape) {
  :root {
    --cell-size: clamp(8px, 3vh, 14px);
    --cell-gap: clamp(4px, 1.5vh, 7px);
  }
}
